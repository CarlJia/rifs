<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡åº“ - RIFS</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
         .stats{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap}
         .stat{background:rgba(15,23,42,0.5);padding:12px 16px;border-radius:8px;border-left:3px solid #06b6d4}
         .stat-label{color:#94a3b8;font-size:0.75rem;text-transform:uppercase}
         .stat-value{color:#06b6d4;font-size:1.2rem;font-weight:600}
         .masonry{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:20px;animation:fadeIn 0.3s ease-in}
         @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
         .image-item{background:rgba(15,23,42,0.5);border-radius:8px;overflow:hidden;transition:transform 0.2s,box-shadow 0.2s;cursor:pointer}
         .image-item:hover{transform:translateY(-4px);box-shadow:0 8px 16px rgba(6,182,212,0.2)}
         .image-item img{width:100%;height:150px;object-fit:cover;display:block;background:rgba(6,182,212,0.1)}
         .image-item.loading-skeleton{background:linear-gradient(90deg,rgba(6,182,212,0.1),rgba(6,182,212,0.05),rgba(6,182,212,0.1));background-size:200% 100%;animation:shimmer 1.5s infinite}
         @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
         .image-info{padding:8px}
         .image-name{color:#cbd5e1;font-size:0.75rem;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
         .image-meta{color:#94a3b8;font-size:0.7rem}
         .pagination{display:flex;justify-content:center;align-items:center;gap:8px;margin:20px 0;flex-wrap:wrap}
         .pagination-info{color:#94a3b8;font-size:0.85rem;margin:0 10px}
         .load-more{text-align:center;margin:20px 0}
         .load-more-btn{padding:12px 32px;background:linear-gradient(135deg,#06b6d4,#3b82f6);border:none;border-radius:6px;color:#fff;cursor:pointer;font-size:1rem;transition:all 0.2s}
         .load-more-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(6,182,212,0.4)}
         .load-more-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
         .no-images{text-align:center;color:#94a3b8;padding:40px}
         .loading{text-align:center;color:#06b6d4;padding:20px}
         .loading-spinner{display:inline-block;width:20px;height:20px;border:2px solid rgba(6,182,212,0.2);border-top:2px solid #06b6d4;border-radius:50%;animation:spin 0.8s linear infinite}
         @keyframes spin{to{transform:rotate(360deg)}}
         .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;justify-content:center;align-items:center}
         .modal img{max-width:90%;max-height:90%;border-radius:8px}
         .modal-close{position:absolute;top:20px;right:40px;color:#fff;font-size:2rem;cursor:pointer}
     </style>
</head>
<body>
    <div id="auth-info" class="auth-info" style="display: none;">
        <span>å·²ç™»å½•</span>
        <button class="logout-btn" onclick="logout()">é€€å‡º</button>
    </div>
    <div class="container">
        <header class="header">
            <h1>å›¾ç‰‡åº“</h1>
            <p>æµè§ˆæ‰€æœ‰ä¸Šä¼ çš„å›¾ç‰‡</p>
        </header>

        <section class="card">
            <div class="card-header">ç»Ÿè®¡ä¿¡æ¯</div>
            <div class="card-content">
                <div class="stats">
                    <div class="stat">
                        <div class="stat-label">æ€»æ•°</div>
                        <div class="stat-value" id="total-count">-</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">å½“å‰æ˜¾ç¤º</div>
                        <div class="stat-value" id="current-count">0</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">å¹³å‡å¤§å°</div>
                        <div class="stat-value" id="avg-size">-</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="card">
            <div class="card-header">
                å›¾ç‰‡åˆ—è¡¨
                <button class="btn" onclick="loadImages()" style="float:right;padding:8px 16px;font-size:0.8rem">åˆ·æ–°</button>
            </div>
            <div class="card-content">
                <div id="loading" class="loading">
                    <div class="loading-spinner"></div>
                    <p>åŠ è½½ä¸­...</p>
                </div>
                <div id="masonry" class="masonry" style="display:none"></div>
                <div id="pagination" class="pagination" style="display:none">
                    <span class="pagination-info">
                        æ˜¾ç¤º <span id="display-start">0</span>-<span id="display-end">0</span> / <span id="total-display">0</span>
                    </span>
                    <button class="load-more-btn" id="load-more-btn" onclick="loadMoreImages()">åŠ è½½æ›´å¤š</button>
                </div>
                <div id="no-images" class="no-images" style="display:none">
                    <div>ğŸ“·</div>
                    <p>æš‚æ— å›¾ç‰‡</p>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p><a href="/">è¿”å›é¦–é¡µ</a> | <a href="/cache/management">ç¼“å­˜ç®¡ç†</a></p>
        </footer>
    </div>

    <div id="image-modal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <img id="modal-image" src="" alt="">
    </div>

    <script src="/static/gallery.js"></script>
</body>
</html>
