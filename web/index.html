<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIFS - 高性能图床服务</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="auth-info" class="auth-info" style="display: none;">
        <span>已登录</span>
        <button class="logout-btn" onclick="logout()">退出</button>
    </div>
    <div class="container">
        <header class="header">
            <h1>RIFS</h1>
            <p>高性能 Rust 图床服务</p>
        </header>

        <section class="card">
            <div class="card-header">图片上传</div>
            <div class="card-content">
                <div class="upload-area">
                    <form id="upload-form">
                        <input type="file" id="file-input" class="file-input" accept="image/*" multiple>
                        <label for="file-input" class="file-label">
                            <div class="upload-icon">📤</div>
                            <div>点击选择图片或拖拽到此处</div>
                            <small>支持 JPG、PNG、GIF、WebP、AVIF、ICO 格式</small>
                        </label>
                        <div class="upload-options">
                            <label>
                                <input type="checkbox" id="auto-copy"> 自动复制链接
                            </label>
                        </div>
                        <button type="submit" class="btn" id="upload-btn">上传图片</button>
                    </form>
                </div>
                <div id="upload-result" class="upload-result"></div>
            </div>
        </section>

        <section class="card">
            <div class="card-header">API 接口</div>
            <div class="card-content">
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/upload</span>
                    </div>
                    <div class="endpoint-desc">上传图片文件</div>
                </div>
                
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/images/{id}</span>
                    </div>
                    <div class="endpoint-desc">获取原图或转换图片</div>
                </div>
                
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/images/{id}@w800_h600_jpeg_q90</span>
                    </div>
                    <div class="endpoint-desc">实时转换：宽800px、高600px、JPEG格式、质量90%</div>
                </div>
            </div>
        </section>

        <section class="card">
            <div class="card-header">转换参数</div>
            <div class="card-content">
                <div class="params-grid">
                    <div class="param">
                        <code>w{数字}</code>
                        <span>最大宽度</span>
                    </div>
                    <div class="param">
                        <code>h{数字}</code>
                        <span>最大高度</span>
                    </div>
                    <div class="param">
                        <code>jpeg/png/webp/avif</code>
                        <span>目标格式</span>
                    </div>
                    <div class="param">
                        <code>q{1-100}</code>
                        <span>质量参数</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="card">
            <div class="card-header">存储信息</div>
            <div class="card-content">
                <div class="storage-info">
                    <h4>存储策略</h4>
                    <p>• SHA256 哈希去重存储</p>
                    <p>• 自动缓存转换结果</p>
                    <p>• 支持 LRU 清理策略</p>
                    <p>• 多数据库支持：SQLite/PostgreSQL/MySQL</p>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>访问 <a href="/gallery">图片库</a> | <a href="/cache/management">缓存管理</a> | <a href="/health">系统状态</a></p>
        </footer>
    </div>

    <script src="/static/login.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
